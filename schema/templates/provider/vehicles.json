{
  "vehicles": {
    "$id": "#/properties/data/properties/vehicles",
    "type": "array",
    "title": "The vehicles payload",
    "items": {
      "$id": "#/properties/data/properties/vehicles/items",
      "type": "object",
      "title": "The vehicle item schema",
      "required": [
        "last_event_time",
        "last_event_type",
        "last_event_type_reason",
        "last_event_location"
      ],
      "properties": {
        "last_event_time": {
          "$id": "#/properties/data/properties/vehicles/items/properties/last_event_time",
          "$ref": "#/definitions/timestamp",
          "description": "The time the most recent status change event occurred, expressed as a Unix Timestamp"
        },
        "last_event_type": {
          "$id": "#/properties/data/properties/vehicles/items/properties/last_event_type",
          "type": "string",
          "description": "The type of the event"
        },
        "last_event_type_reason": {
          "$id": "#/properties/data/properties/vehicles/items/properties/last_event_type_reason",
          "type": "string",
          "description": "The reason for the event"
        },
        "last_event_location": {
          "$id": "#/properties/data/properties/vehicles/items/properties/last_event_location",
          "description": "Location of the vehicle's last status change event",
          "$ref": "#/definitions/MDS_Feature_Point"
        },
        "current_location": {
          "$id": "#/properties/data/properties/vehicles/items/properties/current_location",
          "description": "Current location of vehicle if different from last event, and the vehicle is not currently on a trip",
          "$ref": "#/definitions/MDS_Feature_Point"
        },
        "battery_pct": {
          "$id": "#/properties/data/properties/vehicles/items/properties/battery_pct",
          "type": [
            "number",
            "null"
          ],
          "description": "Percent charge of device battery, expressed between 0 and 1",
          "examples": [
            0.89
          ],
          "minimum": 0,
          "maximum": 1
        }
      },
      "oneOf": [
        {
          "properties": {
            "last_event_type": {
              "enum": [
                "available"
              ]
            },
            "last_event_type_reason": {
              "enum": [
                "service_start",
                "user_drop_off",
                "rebalance_drop_off",
                "maintenance_drop_off",
                "agency_drop_off"
              ]
            }
          }
        },
        {
          "properties": {
            "last_event_type": {
              "enum": [
                "reserved"
              ]
            },
            "last_event_type_reason": {
              "enum": [
                "user_pick_up"
              ]
            }
          }
        },
        {
          "properties": {
            "last_event_type": {
              "enum": [
                "unavailable"
              ]
            },
            "last_event_type_reason": {
              "enum": [
                "low_battery",
                "maintenance"
              ]
            }
          }
        }
      ]
    }
  }
}